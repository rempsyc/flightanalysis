% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fa_find_best_dates.R
\name{fa_find_best_dates}
\alias{fa_find_best_dates}
\title{Find Best Travel Dates}
\usage{
fa_find_best_dates(
  flight_results,
  n = 10,
  by = "min",
  time_min = NULL,
  time_max = NULL,
  airlines = NULL,
  price_min = NULL,
  price_max = NULL,
  travel_time_max = NULL,
  max_stops = NULL,
  max_layover = NULL,
  max_emissions = NULL,
  excluded_airports = NULL
)
}
\arguments{
\item{flight_results}{A flight_results object from fa_fetch_flights().
This function no longer accepts data frames or query objects directly.}

\item{n}{Integer. Number of best dates to return. Default is 10.}

\item{by}{Character. How to calculate best dates: "mean" (average price
across routes), "median", or "min" (lowest price on that date).
Default is "min".}

\item{time_min}{Character. Minimum departure time in "HH:MM" format (24-hour).
Filters flights departing at or after this time. Default is NULL (no filter).}

\item{time_max}{Character. Maximum departure time in "HH:MM" format (24-hour).
Filters flights departing at or before this time. Default is NULL (no filter).}

\item{airlines}{Character vector. Filter by specific airlines. Default is NULL (no filter).}

\item{price_min}{Numeric. Minimum price. Default is NULL (no filter).}

\item{price_max}{Numeric. Maximum price. Default is NULL (no filter).}

\item{travel_time_max}{Numeric or character. Maximum travel time.
If numeric, interpreted as hours. If character, use format "XX hr XX min".
Default is NULL (no filter).}

\item{max_stops}{Integer. Maximum number of stops. Default is NULL (no filter).}

\item{max_layover}{Character. Maximum layover time in format "XX hr XX min".
Default is NULL (no filter).}

\item{max_emissions}{Numeric. Maximum CO2 emissions in kg. Default is NULL (no filter).}

\item{excluded_airports}{Character vector. Airport codes to exclude from results.
Default is NULL (no additional filtering beyond global excluded_airports list).}
}
\value{
A data frame with columns: departure_date, departure_time (or date if datetime not available),
  origin, price (average/median/min), n_routes, num_stops, layover, 
  travel_time, co2_emission_kg, airlines, arrival_date, arrival_time. All column names are lowercase.
  Returns the top N dates with best (lowest) prices, sorted by departure time for display.
  Additional columns are aggregated using mean/median for numeric values and most common value for categorical.
  Note: arrival_date and arrival_time represent the most common values when multiple flights are aggregated
  and may not correspond exactly to the specific departure times shown.
}
\description{
Identifies and returns the top N dates with the cheapest average prices
across all routes. This helps quickly identify the best travel dates
when planning a flexible trip. Supports filtering by various criteria
such as departure time, airlines, travel time, stops, and emissions.
}
\examples{
# Find best dates
fa_find_best_dates(sample_flight_results, n = 3, by = "min")

# With filters
fa_find_best_dates(
  sample_flight_results,
  n = 2,
  max_stops = 0
)
}
