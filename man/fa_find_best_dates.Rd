% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fa_find_best_dates.R
\name{fa_find_best_dates}
\alias{fa_find_best_dates}
\title{Find Best Travel Dates}
\usage{
fa_find_best_dates(
  results,
  n = 10,
  by = "min",
  time_min = NULL,
  time_max = NULL,
  airlines = NULL,
  price_min = NULL,
  price_max = NULL,
  travel_time_max = NULL,
  max_stops = NULL,
  max_layover = NULL,
  max_emissions = NULL
)
}
\arguments{
\item{results}{Either:
- A data frame with columns: Date and Price (and optionally other filter columns)
- A list of flight querys (from fa_create_date_range with multiple origins)
- A single flight query (from fa_create_date_range with single origin)}

\item{n}{Integer. Number of best dates to return. Default is 10.}

\item{by}{Character. How to calculate best dates: "mean" (average price
across routes), "median", or "min" (lowest price on that date).
Default is "min".}

\item{time_min}{Character. Minimum departure time in "HH:MM" format (24-hour).
Filters flights departing at or after this time. Default is NULL (no filter).}

\item{time_max}{Character. Maximum departure time in "HH:MM" format (24-hour).
Filters flights departing at or before this time. Default is NULL (no filter).}

\item{airlines}{Character vector. Filter by specific airlines. Default is NULL (no filter).}

\item{price_min}{Numeric. Minimum price. Default is NULL (no filter).}

\item{price_max}{Numeric. Maximum price. Default is NULL (no filter).}

\item{travel_time_max}{Character. Maximum travel time in format "XX hr XX min".
Default is NULL (no filter).}

\item{max_stops}{Integer. Maximum number of stops. Default is NULL (no filter).}

\item{max_layover}{Character. Maximum layover time in format "XX hr XX min".
Default is NULL (no filter).}

\item{max_emissions}{Numeric. Maximum CO2 emissions in kg. Default is NULL (no filter).}
}
\value{
A data frame with columns: departure_datetime, Origin, Price (average/median/min),
  N_Routes, num_stops, layover, travel_time, co2_emission_kg, and airlines.
  Sorted by price (cheapest first). Additional columns are aggregated using
  mean/median for numeric values and most common value for categorical.
}
\description{
Identifies and returns the top N dates with the cheapest average prices
across all routes. This helps quickly identify the best travel dates
when planning a flexible trip. Supports filtering by various criteria
such as departure time, airlines, travel time, stops, and emissions.
}
\examples{
\dontrun{
# Basic usage
queries <- fa_create_date_range(c("BOM", "DEL"), "JFK", "2025-12-18", "2026-01-05")
for (code in names(queries)) {
  queries[[code]] <- fa_fetch_flights(queries[[code]])
}
best_dates <- fa_find_best_dates(queries, n = 5, by = "min")

# With filters
best_dates <- fa_find_best_dates(
  queries, 
  n = 5, 
  time_min = "08:00", 
  time_max = "20:00",
  max_stops = 1,
  max_emissions = 500
)
}
}
