---
output: 
  github_document
---

# Flight Analysis - R Package

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

An R package for analyzing, forecasting, and collecting flight data and prices from Google Flights. 

**Credits:** This package is an R implementation inspired by the original Python package [google-flight-analysis](https://github.com/celebi-pkg/flight-analysis) by Kaya Celebi.

## Features

- Detailed scraping and querying tools for Google Flights using chromote
- Support for multiple trip types: one-way, round-trip, chain-trip, and perfect-chain
- Driver-free web scraping using Chrome DevTools Protocol
- Flexible date search across multiple airports and date ranges
- Summary tables showing prices by city and date
- Automatic identification of cheapest travel dates

## Installation

You can install the development version of flightanalysis from GitHub:

```{r eval=FALSE}
# Install devtools if you haven't already
# install.packages("devtools")

# Install flightanalysis
devtools::install_github("rempsyc/flightanalysis")
```

## Usage

### Loading the Package

```{r eval=TRUE}
library(flightanalysis)
```

### Creating Flight Queries

The main scraping function that makes up the backbone of most functionalities is `fa_define_query()`. It serves as a data object, preserving the flight information as well as meta-data from your query.

```{r eval=TRUE}
# Round-trip
query <- fa_define_query("JFK", "IST", "2025-07-20", "2025-08-20")
query
```

The package supports multiple trip types:

- **One-way**: `fa_define_query("JFK", "IST", "2025-07-20")`
- **Round-trip**: `fa_define_query("JFK", "IST", "2025-07-20", "2025-08-20")`
- **Chain-trip**: `fa_define_query("JFK", "IST", "2025-08-20", "RDU", "LGA", "2025-12-25")`
- **Perfect-chain**: `fa_define_query("JFK", "2025-09-20", "IST", "2025-09-25", "JFK")`

### Scraping Data

The package includes full web scraping functionality using **chromote**:

```{r eval=TRUE}
# Create a query
query <- fa_define_query("JFK", "IST", "2025-12-18", "2026-01-02")

# Scrape the data
flights <- fa_fetch_flights(query)

# View the scraped data
head(flights$data) |>
  knitr::kable()
```

**Why chromote?**
- ✅ No external driver files needed (uses Chrome DevTools Protocol directly)
- ✅ More reliable - no driver version mismatches or port conflicts
- ✅ Works on all platforms (Windows, macOS, Linux)
- ✅ Fully headless by default

## Flexible Date Search

The package supports flexible date search across multiple airports and dates:

```{r eval=TRUE}
# Create query objects for multiple origins and dates
queries <- fa_create_date_range(
  origin = c("BOM", "DEL"),
  dest = "JFK",
  date_min = "2025-12-18",
  date_max = "2025-12-20"
)
queries

# Scrape all queries
flights <- fa_fetch_flights(queries)

# Create summary table (City × Date with prices)
fa_summarize_prices(flights) |>
  knitr::kable()

# Find the cheapest dates
fa_find_best_dates(flights, by = "min") |>
  knitr::kable()
```

**Key Features:**
- Search multiple origin airports and dates efficiently
- Create wide summary tables for easy price comparison
- Identify cheapest travel dates automatically
- Direct query object support - no manual data processing needed

## Development Status

This is a complete R port of the Python package. The core data structures and API are fully implemented. Web scraping functionality uses chromote (Chrome DevTools Protocol), which provides driver-free browser automation without the configuration overhead of RSelenium.

## License

MIT License

## Original Python Package

This is a port of the [google-flight-analysis](https://github.com/celebi-pkg/flight-analysis) Python package by Kaya Celebi.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
